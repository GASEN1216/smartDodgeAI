# 智能躲避 AI (Smart Dodge AI)

[![中文](https://img.shields.io/badge/语言-中文-red)](README.md) [![English](https://img.shields.io/badge/Language-English-blue)](README_EN.md)

![Mod Logo](icon_workshop.png)

## 简介

**智能躲避 AI** 是一个泰拉瑞亚tModLoader Mod，赋予游戏中的敌怪和Boss智能躲避玩家弹幕的能力，让战斗更具挑战性和乐趣。敌人会尝试闪避你的攻击，同时保留原有的攻击和移动模式，创造更加动态和刺激的战斗体验。

还在为你的弹幕总是轻易命中敌人而感到无趣吗？这个Mod将会改变这一切！

## 主要功能

- **智能闪避**：大部分敌怪和Boss（除城镇NPC外）会尝试闪避玩家的弹幕和非纯近战武器
- **多样化闪避机制**：敌人可能使用时间膨胀、影分身、墨水喷射等多种闪避方式
- **保留原版AI**：闪避逻辑附加在原版AI之上，敌人仍然会正常攻击和移动
- **视觉和音效反馈**：当敌人成功闪避时，会显示"MISS"文本、播放音效并生成粒子效果
- **高度可配置**：通过游戏内的Mod配置菜单自定义所有行为
- **愚人节彩蛋**：特殊的骷髅专用模式，仅在4月1日可用（包含神秘的音乐效果）

## 新增物品

### 核心饰品
- **瞄准芯片 (Targeting Chip)**
  - 一个新的饰品，装备后可以有效反制敌人的闪避。
  - **效果**: 提升你的命中率，降低敌人的闪避几率。提升的数值与你配置中的"闪避几率"挂钩（`命中率加成 = 闪避几率 / 5`）。
  - **合成方式**: 可由任意一种职业徽章（战士/射手/巫士/召唤师）在工匠作坊处合成。

### 墨水防护饰品系统
- **模糊饰品 (Blurred Trinket)**
  - **效果**: 敌人墨水喷射次数上限 -2，防御 +1
  - **获取**: 在世界出生点旁的木制宝箱中保证获得1个

- **凝胶回声 (Gel Echo)**
  - **效果**: 敌人墨水喷射次数上限 -2，最大生命 +20
  - **获取**: 33%几率掉落自史莱姆王

- **视网膜波纹 (Retinal Ripple)**
  - **效果**: 敌人墨水喷射次数上限 -2，暴击率 +2%
  - **获取**: 25%几率掉落自克苏鲁之眼

- **暗影残片 (Shadow Remnant)**
  - **效果**: 敌人墨水喷射次数上限 -2，移动速度 +5%
  - **获取**: 100%几率掉落自世界吞噬者或克苏鲁之脑

- **蜂巢幻象 (Hive Mirage)**
  - **效果**: 敌人墨水喷射次数上限 -2，最大魔法 +20
  - **获取**: 20%几率掉落自蜂后

- **幻影焦点 (Phantom Locus)** ⭐
  - **效果**: 敌人墨水喷射次数上限设为1，防御 +1，最大生命 +20，暴击率 +2%，移动速度 +5%，最大魔法 +20
  - **合成**: 由所有墨水防护饰品在工匠作坊处合成

## 愚人节彩蛋 🎃

### 骷髅专用模式
- **启用条件**: 配置选项一直可见，但仅在4月1日（愚人节）可以启用
- **功能**: 当启用时，只有骷髅类型的NPC会尝试闪避玩家的攻击
- **兼容性**: 支持原版骷髅和Mod骷髅（通过名称关键词识别）

### Megalovania音乐
- **触发条件**: 骷髅专用模式启用 + 骷髅NPC在附近
- **音乐**: 播放压缩版的Megalovania音乐（Undertale经典BGM）
- **特色**: 故意压缩得很差，体现愚人节幽默效果
- **持续时间**: 30秒后自动停止

## 安装方法

### 通过Steam Workshop安装
1. 订阅[Steam Workshop页面上的Mod](https://steamcommunity.com/sharedfiles/filedetails/?id=3458598925)
2. 启动tModLoader并启用"Smart Dodge AI"

### 手动安装
1. 下载最新的发布版本
2. 将.tmod文件放入`Documents/My Games/Terraria/tModLoader/Mods`文件夹
3. 启动tModLoader并启用"Smart Dodge AI"

## 配置选项

Mod提供了多种配置选项，可通过游戏内Mod配置菜单进行调整：

### 基础设置
| 配置项 | 描述 |
|--------|------|
| 闪避几率 | 敌人闪避弹幕伤害的概率（百分比） |
| 显示闪避文本 | 敌人闪避弹幕时是否显示"MISS"文本 |
| 启用闪避音效 | 敌人闪避弹幕时是否播放音效 |
| 启用闪避粒子 | 敌人闪避弹幕时是否显示粒子效果 |
| 启用Boss闪避 | 允许Boss闪避弹幕伤害 |
| 启用普通敌怪闪避 | 允许普通敌怪闪避弹幕伤害 |

### 闪避行为设置
| 配置项 | 描述 |
|--------|------|
| 启用瞬移 | 敌人闪避后是否瞬移到玩家另一侧 |
| 瞬移冷却 | 敌人瞬移的冷却时间（秒） |

### 按伤害类型设置闪避率
| 配置项 | 描述 |
|--------|------|
| 远程闪避率 | 远程弹幕的闪避率（-1使用全局设置） |
| 魔法闪避率 | 魔法弹幕的闪避率（-1使用全局设置） |
| 召唤闪避率 | 召唤弹幕的闪避率（-1使用全局设置） |
| 近战闪避率 | 近战弹幕的闪避率（-1使用全局设置） |

### 愚人节彩蛋设置
| 配置项 | 描述 |
|--------|------|
| 骷髅专用闪避 | 一直可见，但仅在4月1日可以启用，启用后只有骷髅会闪避 |

## 兼容性

- 设计上兼容原版和大部分其他Mod
- 不直接修改原版AI，减少冲突可能性
- 如果发现与其他Mod的兼容性问题，请在Issues中报告

## 贡献

欢迎通过Issues和Pull Requests贡献代码或提出建议。

## 许可证

本项目采用[MIT许可证](LICENSE)。

## 联系方式

如有问题或建议，请在GitHub Issues中提出或通过Steam Workshop评论联系我。

---

*"让你的敌人更聪明，战斗更刺激！"*
